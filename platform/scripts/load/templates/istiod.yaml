apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod
  namespace: {{.Release.Namespace}}

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: istio-reader
    release: istio
  name: istio-reader-clusterrole-{{.Release.Namespace}}
rules:
- apiGroups:
  - config.istio.io
  - security.istio.io
  - networking.istio.io
  - authentication.istio.io
  - rbac.istio.io
  - telemetry.istio.io
  - extensions.istio.io
  resources:
  - '*'
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - endpoints
  - pods
  - services
  - nodes
  - replicationcontrollers
  - namespaces
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - workloadentries
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - networking.x-k8s.io
  - gateway.networking.k8s.io
  resources:
  - gateways
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - multicluster.x-k8s.io
  resources:
  - serviceexports
  verbs:
  - get
  - list
  - watch
  - create
  - delete
- apiGroups:
  - multicluster.x-k8s.io
  resources:
  - serviceimports
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - replicasets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod-clusterrole-{{.Release.Namespace}}
rules:
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - validatingwebhookconfigurations
  verbs:
  - get
  - list
  - watch
  - update
- apiGroups:
  - config.istio.io
  - security.istio.io
  - networking.istio.io
  - authentication.istio.io
  - rbac.istio.io
  - telemetry.istio.io
  - extensions.istio.io
  resources:
  - '*'
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - networking.istio.io
  resources:
  - workloadentries
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - networking.istio.io
  resources:
  - workloadentries/status
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - networking.istio.io
  resources:
  - serviceentries/status
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  - nodes
  - services
  - namespaces
  - endpoints
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses
  - ingressclasses
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - ingresses/status
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - get
  - list
  - watch
  - update
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
- apiGroups:
  - networking.x-k8s.io
  - gateway.networking.k8s.io
  resources:
  - '*'
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - networking.x-k8s.io
  - gateway.networking.k8s.io
  resources:
  - '*'
  verbs:
  - update
  - patch
- apiGroups:
  - gateway.networking.k8s.io
  resources:
  - gatewayclasses
  verbs:
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - multicluster.x-k8s.io
  resources:
  - serviceexports
  verbs:
  - get
  - watch
  - list
  - create
  - delete
- apiGroups:
  - multicluster.x-k8s.io
  resources:
  - serviceimports
  verbs:
  - get
  - watch
  - list

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod-gateway-controller-{{.Release.Namespace}}
rules:
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - ""
  resources:
  - serviceaccounts
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: istio-reader
    release: istio
  name: istio-reader-clusterrole-{{.Release.Namespace}}
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: istio-reader-clusterrole-{{.Release.Namespace}}
subjects:
- kind: ServiceAccount
  name: istio-reader-service-account
  namespace: {{.Release.Namespace}}

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod-clusterrole-{{.Release.Namespace}}
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: istiod-clusterrole-{{.Release.Namespace}}
subjects:
- kind: ServiceAccount
  name: istiod
  namespace: {{.Release.Namespace}}

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod-gateway-controller-{{.Release.Namespace}}
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: istiod-gateway-controller-{{.Release.Namespace}}
subjects:
- kind: ServiceAccount
  name: istiod
  namespace: {{.Release.Namespace}}

---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: istiod
    istio: pilot
    istio.io/rev: default
    release: istio
  name: istiod
  namespace: {{.Release.Namespace}}
spec:
  selector:
    matchLabels:
      istio: pilot
  template:
    metadata:
      annotations:
        prometheus.io/port: "15014"
        prometheus.io/scrape: "true"
        sidecar.istio.io/inject: "false"
      labels:
        app: istiod
        istio: pilot
        istio.io/dataplane-mode: none
        istio.io/rev: default
        sidecar.istio.io/inject: "false"
    spec:
      terminationGracePeriodSeconds: 0
      containers:
      - args:
        - discovery
        - --monitoringAddr=:15014
        - --log_output_level=default:info
        - --domain
        - cluster.local
        - --keepaliveMaxServerConnectionAge
        - 30m
        env:
        - name: ENABLE_PEERING_DISCOVERY
          value: "{{.Values.ambient}}"
        - name: PILOT_ENABLE_AMBIENT
          value: "{{.Values.ambient}}"
        - name: REVISION
          value: default
        - name: PILOT_CERT_PROVIDER
          value: istiod
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          value: "istio-system"
        - name: SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: KUBECONFIG
          value: /var/run/secrets/remote/kubeconfig.yaml
        - name: CA_TRUSTED_NODE_ACCOUNTS
          value: istio-system/ztunnel
        - name: CLUSTER_ID
          value: {{.Release.Namespace}}
        - name: GOMEMLIMIT
          valueFrom:
            resourceFieldRef:
              resource: limits.memory
        - name: GOMAXPROCS
          valueFrom:
            resourceFieldRef:
              resource: limits.cpu
        - name: KUBE_FEATURE_WatchListClient
          value: "true"
        image: {{.Values.image}}
        name: discovery
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 15010
          protocol: TCP
        - containerPort: 15017
          protocol: TCP
        - containerPort: 15014
          protocol: TCP
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 1
          periodSeconds: 3
          timeoutSeconds: 5
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        volumeMounts:
        - mountPath: /var/run/secrets/tokens
          name: istio-token
          readOnly: true
        - mountPath: /var/run/secrets/istio-dns
          name: local-certs
        - mountPath: /var/run/secrets/remote
          name: istio-kubeconfig
          readOnly: true
        - name: cacerts
          mountPath: /etc/cacerts
          readOnly: true
      serviceAccountName: istiod
      volumes:
      - name: cacerts
        secret:
          secretName: cacerts
      - emptyDir:
          medium: Memory
        name: local-certs
      - name: istio-token
        projected:
          sources:
          - serviceAccountToken:
              audience: istio-ca
              expirationSeconds: 43200
              path: istio-token
      - name: istio-kubeconfig
        configMap:
          name: istio-kubeconfig

---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod
  namespace: {{.Release.Namespace}}
rules:
- apiGroups:
  - networking.istio.io
  resources:
  - gateways
  verbs:
  - create
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - get
  - watch
  - list
  - update
  - delete
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - update
  - patch
  - create

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: istiod
    release: istio
  name: istiod
  namespace: {{.Release.Namespace}}
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: istiod
subjects:
- kind: ServiceAccount
  name: istiod
  namespace: {{.Release.Namespace}}

---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: istiod
    install.operator.istio.io/owning-resource: unknown
    istio: pilot
    istio.io/rev: default
    operator.istio.io/component: Pilot
    release: istio
  name: istiod
  namespace: {{.Release.Namespace}}
spec:
  ports:
  - name: grpc-xds
    port: 15010
    protocol: TCP
  - name: https-dns
    port: 15012
    protocol: TCP
  - name: https-webhook
    port: 443
    protocol: TCP
    targetPort: 15017
  - name: http-monitoring
    port: 15014
    protocol: TCP
  selector:
    app: istiod
    istio: pilot
---
# Use a fixed well known test CA to have a shared root of trust
apiVersion: v1
data:
  ca-cert.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZlVENDQTJHZ0F3SUJBZ0lVR21IWHFUUzFEUXpWZXVmRDVJeHlWNUc1dXU0d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRU9NQXdHQTFVRUNnd0ZTWE4wYVc4eEVEQU9CZ05WQkFNTUIxSnZiM1FnUTBFd0hoY05NalF3TlRJeApNVFUwTXpBeFdoY05NelF3TlRFNU1UVTBNekF4V2pBOU1RNHdEQVlEVlFRS0RBVkpjM1JwYnpFWU1CWUdBMVVFCkF3d1BTVzUwWlhKdFpXUnBZWFJsSUVOQk1SRXdEd1lEVlFRSERBaGpiSFZ6ZEdWeU1UQ0NBaUl3RFFZSktvWkkKaHZjTkFRRUJCUUFEZ2dJUEFEQ0NBZ29DZ2dJQkFKZWdBQzBEb2RUQmtiSXBCbHhDb1RwYnd4NDZKRkFmdHQ1RgpRMXA0dUgrbytUK2FYVHF2TW13T1k4eXRhdE5BVDFBQjFGRlpZT2JrcktLemJtMW1UQ0o1N2lzWG1wcEdTbUhiCnhMNWJ3Vkl4ZXlOcXlaelFUVFBmNXVONUVET0loSzVEOGkwV1BIbEU0Wldwam84ell0NWhNNUVKaUVpcDFGelMKZmV0UmF0NmpEaHVnTGF1Z09EczVUZkp2eExMWXc3N3l6Rm9XOTFCMzFybnpXVCtmMGxENTZOdGVZSDVKTld3egpOSFBUVFJlc2hVRVpBOHBuUnU4eWNOMVFKVFBMNjdGenY4OEl2VHFLNFdtRmN0MFBOR1YvRFpteGVGOE1lWnlHCmt4VnVGdlRVbVVWWFFTQlc4NzZzZjhLV3FvRGhtNzlEMnducFlFT29XY24yZk53bml2WmM4RkwyUEtkeDg2ckcKak9hR3RjY1pWL0xZeWsybmhZWkhFSVMySk00cFIzNkhuNFBudzN6Q2IzZks5M0lkMHVLOVI3QnVDSE5BSFBzaQpTVHUxaEQrUGNKQktsdXZwM0pCNnUzSzhYdmpQTXJTbTg1bld0ZUNpanpoaHBZUGZjZ05NV0dxT2thRjZ3eTNKCnR3VEEyMWhJd0FFQWp5R21DdWVieXNPN3BFZEp3RHdYOTJNcU1VYVJNYXdRUzdsUWVEZStPVW15MThZMUIxbTMKdDZDNUZLWWdDU3dNclZ5eUp6LzVuVlJxam9RVEkyQjVXRU9iNjExVVpuNEZSNlZ2ZndXMUVLb01qaWJmNTRRbwoySCt1eUpidko2a2VhR1U0Yjc1NEVtbnYvdER6TGkzZDladzRrYXB2Q0R1N2E1WjZFLzBRd0hjZWJFeWlHd2JaCjdRcUx0L254QWdNQkFBR2pnWXN3Z1lnd0hRWURWUjBPQkJZRUZDRzl5SjFYUWJ1S2dPbzFlSGltQ0xJcEI0aHoKTUJJR0ExVWRFd0VCL3dRSU1BWUJBZjhDQVFBd0RnWURWUjBQQVFIL0JBUURBZ0xrTUNJR0ExVWRFUVFiTUJtQwpGMmx6ZEdsdlpDNXBjM1JwYnkxemVYTjBaVzB1YzNaak1COEdBMVVkSXdRWU1CYUFGUDdWR1E1bzRKbkNSZmpJCmM1R3ZFYkVtM1pMYU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQndzcmRPdDd1UzNzMFRudnJDSWlBSEVQTjcKRysxb1hJRi9kcWtHK0txSjMraGZhdm9nejYxNkU5NmxCazZOc04waWdFVzY4UmdCSUYwM295WXM5OVpYbHc5UQpZd2dUWG1vWlBlZVZHbHN4bHBpcWlWN1ZGdjRScyt3T1UwbDY4WThCMGNzZkJEaVd3eGhtYnpWWDl0MjhxZzljCkN0TXRMLzVBemhGWnpoMHh1Q0VScW4yaVlvSG8ySXkxaUxySmxrTGlhU2RRVTg0QzJ4SkgvVGo1SWRIdkdNRGoKMFdMMEJ6bUFlUEM4dGJhR05qY0tRSkdJeG5QRElHOWZjd1BpdzNCTlRLZG9oQmlUVzIrVTBtWGdQb3hsMElXSQplUXFlck1oc1d2VWRCRCt2TjlReGNOZHVQSHN3QmhhZTlla0g5ak8zakFHWE9QZWllR2JjZlRxQ3MrUlZySTZ0Ck92T1E1R3FNM0VDOGwwWFMwZWFSWHhjU2E5aUFaWFRIS0l4Qm5GVE1UaUNDcHEzNUhuenpDVThBTXdwQTd0R3QKOEhZaEt6N1d2TDdaOE1jSWY1bFZsaFUvazBBTklYVEVpZmVsVHl4dTJiL09VRDhCVGU3TEVyK1RSWEFwN3pIbgo5bTE4dDVzbm1zMHZXUS8zdkIxa0gwaEwxSFFoSWVyVExRWWZtZHQwQndNRUlPc29Qd1ZacjY5cUFXTW9EK05hCjMzWmNmODZITDRZWDlzeUhKYUJYTDlOYWF6VDMwQTNsUXJzZjQxejEwUVF0SFB5anBidmp5cFdybnZla3o2K20KYnRubW50K2FWYko4VXhXZ3hlU3RvMzNOV1VWYnAwMmR5MjFFNWM0Nkl2eXlkR2gxTnJFZlh0VUZtTGg1QUNsZwpnTXFhTDZtMXdTczcxamJwVmc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  ca-key.pem: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRZ0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1N3d2dna29BZ0VBQW9JQ0FRQ1hvQUF0QTZIVXdaR3kKS1FaY1FxRTZXOE1lT2lSUUg3YmVSVU5hZUxoL3FQay9tbDA2cnpKc0RtUE1yV3JUUUU5UUFkUlJXV0RtNUt5aQpzMjV0Wmt3aWVlNHJGNXFhUmtwaDI4UytXOEZTTVhzamFzbWMwRTB6MytiamVSQXppSVN1US9JdEZqeDVST0dWCnFZNlBNMkxlWVRPUkNZaElxZFJjMG4zclVXcmVvdzRib0Mycm9EZzdPVTN5YjhTeTJNTys4c3hhRnZkUWQ5YTUKODFrL245SlErZWpiWG1CK1NUVnNNelJ6MDAwWHJJVkJHUVBLWjBidk1uRGRVQ1V6eSt1eGM3L1BDTDA2aXVGcApoWExkRHpSbGZ3MlpzWGhmREhtY2hwTVZiaGIwMUpsRlYwRWdWdk8rckgvQ2xxcUE0WnUvUTlzSjZXQkRxRm5KCjluemNKNHIyWFBCUzlqeW5jZk9xeG96bWhyWEhHVmZ5Mk1wTnA0V0dSeENFdGlUT0tVZCtoNStENThOOHdtOTMKeXZkeUhkTGl2VWV3YmdoelFCejdJa2s3dFlRL2ozQ1FTcGJyNmR5UWVydHl2Rjc0enpLMHB2T1oxclhnb284NApZYVdEMzNJRFRGaHFqcEdoZXNNdHliY0V3TnRZU01BQkFJOGhwZ3JubThyRHU2UkhTY0E4Ri9kaktqRkdrVEdzCkVFdTVVSGczdmpsSnN0ZkdOUWRadDdlZ3VSU21JQWtzREsxY3NpYy8rWjFVYW82RUV5TmdlVmhEbSt0ZFZHWisKQlVlbGIzOEZ0UkNxREk0bTMrZUVLTmgvcnNpVzd5ZXBIbWhsT0crK2VCSnA3LzdROHk0dDNmV2NPSkdxYndnNwp1MnVXZWhQOUVNQjNIbXhNb2hzRzJlMEtpN2Y1OFFJREFRQUJBb0lDQUFtOG1CWkw2K24rTGkxN0xmSGh3M204Clo4aTZvaGRWR2dpbStQN0h6czAvM0JXbUE0T2Z1WVN2M2QvSWFSbzh3SHNhU3ZpWVhUMG1oU0dEbFQxSU91NWgKMXhZRVU0VEJxOGdoOVQzbUpZRnlOUDZldm1pb0JiVWxsUzJaV2gxOUVFd2loOXcyVjliUHdnNjZ6ekZKOHZqbAoxQXBseXM4anZNUGpMbnZjaEJqYzdxeCtla0JScnhxNmdOTm5Nd0hySXBMU0E2WnJZQ0ZXT0w5RExjR0VzVnhLCjJCV3lOMDhVdzIzNTBjMzRUVFNPZXhZbGxaVTdVWlpOcm1xLzJVdTh0aHQwbStZZklRdXYzRzdLeDRnRGtIRk8KR2VEN1FRZ1ZoSCsxTXAvSExJazNWOHBZb3BHQmsvQjBJbFlzRjdIa0N2emF6aWVTU1lDK3dGbFVUMHRSN0wzdworcjFQdUpRdDNLZzhmQlBPMCtyWFpGNXlZTjFNRVdkbDYxeXFpa1MzbUNqY05lczBEUi9QeHhzVjlvNElpMW5WCjVGV1duN3Z4QkVXakV2dW1mUUQvdGtUU1doS2JsT3NFVktKNDFNajRnVmVIODdYd2UycXJpMEZGcm5MUmNsR0UKRWhSR2FwZDlIV3FMWmJWUTJ1TFlYdWxoTHhZb2tiK0tiQWlvcyt6b0I3ci9OM25iNDREMURBZHFzUkZkdFlXZgpQQVhBWm5ySjV0amdva0tkVmpNaGJGQWRQeXJWMVJzY3h6ZGpZOWpuVVVlNzI3L2Y3K2NneHFZeWJZZ2JkaHlRCnRKSFVKZmdXbEMvSXp3clpkZUxuaytUQmRPb2hKcnpweXZsTWYvay9xUzR5WkNDS2pnMlNtNmlKNENyL3ZWWjMKT21rZWJ4N1lGK3c3VENJNnFyZzVBb0lCQVFEUm5teXZvSW8vUTJqOHM3ZUxYSC9GVlNrSUt4bHlTdkJaNUlacQpMbWNBTFhRZ3FaZ0VjSndTMGI2Q2dNZUtOaElyYkFLZzBvY0Y3akt4OXl1SkpxREczRjY3NDhkTzE0dkhmTG9QCmd3YUZycjcxZFFaSDFkeXpscWs4UFVGMWJUd2VEMEIxOGYzRFNVMHFYdVBCa1RyMGxrWGhnQmh3b2lyendiNUoKdWU0enpnQW5UejNsUjFKOXlWVkE0VlVvdFNGeUh1Qkp6SjJnQ2JlSlNINVVQU1VDbUk1SnpVNUpCOEtDaGRsdwptdHUxajFkdUFiZ0pod3dmeVFmZHVNV0NnaENaWXBSRWhwWXozSHlIZ2svV1NPVkNwM0QwWEFLaWVtMmhkem5yCjh2NlRTTkoyZlZlMW42T1JYcjdtV2lXL1JVTDAxdlg3RDdpMXFCV0lGd0Z5Z0gzVkFvSUJBUUM1TEpmdUhDS2wKVk10UW1MZVVhWExzaHdwOTU5TExRSVRBd0NzU3NodEJBOThDSmtrenNKQW5iS1NSQmprKzRta2xMU0ZwQVZUMQp4R25qbGJFUmg5WW55bk9FK1RpRWlxZCtubE9jQmpSVWdhMHF2aTRWU1QyaDU2RWdBcXl3YzE0eU8rSHo4NTYvCkhhNVQ5aDYyVjhuNkhyeHNYL0xRWUp3S29veW5jS2NDdnd0dWt6YzQyUDNPTDBpUUVCWXZqaFdzWXhxRSt3YjcKSlMrY1VGYnh5MmE4OEEwaTBQYzBTOTVQL1NsZUQveDdmcjN4THJmZjV1SWUwa05UdE15MFFHS1UzOGZRdlkxTApDTG9ES1NJWkhaV3FCT1h1bzJOMnV3SEo3aDlwT0JjaVI3b0ZEd2wrL0Z3clMreGNWd0dacWw1M09YR0RzMTFCCmFVZ01mN2VaY3EydEFvSUJBRi9Kd1dqUU45eUk5V1RreXk4SDZldEc2eVVzYk1ocHJrT2x4amFuVmJJakV6b0oKeGNuaG03Q040RHpLbEdSNEtQMW1zaHpEbDZnQ0hYQnR2cHRCNTU1My9XSm15Q0VqSm1EV2dqK3NaRUthZy9DdQp0VndHUW9CZWpKOVdicDgyZDQ1VThlUHozVDVzTkxMMEFhZm1zY1lyRld2aW1VaC9FcG1wSTBlVmkyQm85bkVBCktReW85dTA4SDVVeVl6UGk4Wkd3d2xWM0IyQ21rQlJQNkVxZVZsZEZWMkFxVFdmWi8reWROYXZiV0NNemlZUmYKakxYdDNJQjU0UHBWQVF5T1d2OThxTHhYdERPbXdkRTZuemtRdnBNaTZOOEJYTUxhcDFadG9TNU5NRUFsdXVjaQpoLzRiSVNmQTRBTnJsbXc5UGtlY0kzUEN6MmxUa2VOS2dBTE83TEVDZ2dFQkFKUEJsNEd5QlpzekxBQ2x1MmE3Ck5hNnltcGFZa3NVSU9HV3RjVEU3MlM5cHJWc0R2Y2wzQzYvSnF3N2xqbXcxTVgwdW84Z3IvZVVWMHdCOGc0dmYKZmV6R1NLTkVVZXJBMEtIaUtBa0prbHdVRlY5VDNXV3l5WEVWYUtZb1BDK1gvd1BLY0tPK00xK0FpWWdKamJ3bQpGTTUyRkJmTi8reHlDbEVhSDIzRUlCKzYzWjVmN2VKNGt4MGc4Wit5bG1GZjJMOXpYTWZibmxocjlhK2ZFNkZnCmtod1UyQVorQTZOQkhxVm85c2ROcmtQRWdEK2c3YXZGaVl6YWJrcXVxK0R3dHpqZno0c3FsVUhZTnNVcTMwQjMKTU9NM2dWbUlHbWUxRk5wU0hkSlJwWFAvRTluUmc5eEY5aTIrS1Y0Tk53T3N4REFTTUJmTTJZN0dPVzF2dzhxMwpqUWtDZ2dFQVFUeUtWODFmRTNPakZwcWZFYTNvM2d5dERXanFMN25IYjhJOWNWaWFXQ0pOMzM4KzQ2b1FQZkJyCkNtVlUxV294Vkt6bmVNVUNDdzlZSkFSR1AwNmVyM1ZzdUlYRjJheFJyNWNNWHdrZ29sRzBGeEEzUHA4Q24wNmwKMmp3b3Nydm9WcmNTa1RQc3dTZjZUUHZ4NTg4N3IxSkc3b2xNeTl0cytzRnk1UjloRmJCS2VpYkRES0R5c3NzKwpwTEovYVBUZmJ6TXgxdCtJQUM3RGRZTy9NMUVPcEkrRHdtdkhFS2lOK2NaS0RxbVdSb0g2ZkViOG9RVHlObU1zCjg3dXVpODNxWkxycnR6WkNQSE94S2xvMlFWc3pJc1Z5VTNQNUJXVmIza2hORms5Vi8wZ21haC9oR2t3MDFRRUEKZm1OWlArMURpWVR6RmdnQTIwRzl6REgwOTRzcDd3PT0KLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQo=
  cert-chain.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZlVENDQTJHZ0F3SUJBZ0lVR21IWHFUUzFEUXpWZXVmRDVJeHlWNUc1dXU0d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRU9NQXdHQTFVRUNnd0ZTWE4wYVc4eEVEQU9CZ05WQkFNTUIxSnZiM1FnUTBFd0hoY05NalF3TlRJeApNVFUwTXpBeFdoY05NelF3TlRFNU1UVTBNekF4V2pBOU1RNHdEQVlEVlFRS0RBVkpjM1JwYnpFWU1CWUdBMVVFCkF3d1BTVzUwWlhKdFpXUnBZWFJsSUVOQk1SRXdEd1lEVlFRSERBaGpiSFZ6ZEdWeU1UQ0NBaUl3RFFZSktvWkkKaHZjTkFRRUJCUUFEZ2dJUEFEQ0NBZ29DZ2dJQkFKZWdBQzBEb2RUQmtiSXBCbHhDb1RwYnd4NDZKRkFmdHQ1RgpRMXA0dUgrbytUK2FYVHF2TW13T1k4eXRhdE5BVDFBQjFGRlpZT2JrcktLemJtMW1UQ0o1N2lzWG1wcEdTbUhiCnhMNWJ3Vkl4ZXlOcXlaelFUVFBmNXVONUVET0loSzVEOGkwV1BIbEU0Wldwam84ell0NWhNNUVKaUVpcDFGelMKZmV0UmF0NmpEaHVnTGF1Z09EczVUZkp2eExMWXc3N3l6Rm9XOTFCMzFybnpXVCtmMGxENTZOdGVZSDVKTld3egpOSFBUVFJlc2hVRVpBOHBuUnU4eWNOMVFKVFBMNjdGenY4OEl2VHFLNFdtRmN0MFBOR1YvRFpteGVGOE1lWnlHCmt4VnVGdlRVbVVWWFFTQlc4NzZzZjhLV3FvRGhtNzlEMnducFlFT29XY24yZk53bml2WmM4RkwyUEtkeDg2ckcKak9hR3RjY1pWL0xZeWsybmhZWkhFSVMySk00cFIzNkhuNFBudzN6Q2IzZks5M0lkMHVLOVI3QnVDSE5BSFBzaQpTVHUxaEQrUGNKQktsdXZwM0pCNnUzSzhYdmpQTXJTbTg1bld0ZUNpanpoaHBZUGZjZ05NV0dxT2thRjZ3eTNKCnR3VEEyMWhJd0FFQWp5R21DdWVieXNPN3BFZEp3RHdYOTJNcU1VYVJNYXdRUzdsUWVEZStPVW15MThZMUIxbTMKdDZDNUZLWWdDU3dNclZ5eUp6LzVuVlJxam9RVEkyQjVXRU9iNjExVVpuNEZSNlZ2ZndXMUVLb01qaWJmNTRRbwoySCt1eUpidko2a2VhR1U0Yjc1NEVtbnYvdER6TGkzZDladzRrYXB2Q0R1N2E1WjZFLzBRd0hjZWJFeWlHd2JaCjdRcUx0L254QWdNQkFBR2pnWXN3Z1lnd0hRWURWUjBPQkJZRUZDRzl5SjFYUWJ1S2dPbzFlSGltQ0xJcEI0aHoKTUJJR0ExVWRFd0VCL3dRSU1BWUJBZjhDQVFBd0RnWURWUjBQQVFIL0JBUURBZ0xrTUNJR0ExVWRFUVFiTUJtQwpGMmx6ZEdsdlpDNXBjM1JwYnkxemVYTjBaVzB1YzNaak1COEdBMVVkSXdRWU1CYUFGUDdWR1E1bzRKbkNSZmpJCmM1R3ZFYkVtM1pMYU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQndzcmRPdDd1UzNzMFRudnJDSWlBSEVQTjcKRysxb1hJRi9kcWtHK0txSjMraGZhdm9nejYxNkU5NmxCazZOc04waWdFVzY4UmdCSUYwM295WXM5OVpYbHc5UQpZd2dUWG1vWlBlZVZHbHN4bHBpcWlWN1ZGdjRScyt3T1UwbDY4WThCMGNzZkJEaVd3eGhtYnpWWDl0MjhxZzljCkN0TXRMLzVBemhGWnpoMHh1Q0VScW4yaVlvSG8ySXkxaUxySmxrTGlhU2RRVTg0QzJ4SkgvVGo1SWRIdkdNRGoKMFdMMEJ6bUFlUEM4dGJhR05qY0tRSkdJeG5QRElHOWZjd1BpdzNCTlRLZG9oQmlUVzIrVTBtWGdQb3hsMElXSQplUXFlck1oc1d2VWRCRCt2TjlReGNOZHVQSHN3QmhhZTlla0g5ak8zakFHWE9QZWllR2JjZlRxQ3MrUlZySTZ0Ck92T1E1R3FNM0VDOGwwWFMwZWFSWHhjU2E5aUFaWFRIS0l4Qm5GVE1UaUNDcHEzNUhuenpDVThBTXdwQTd0R3QKOEhZaEt6N1d2TDdaOE1jSWY1bFZsaFUvazBBTklYVEVpZmVsVHl4dTJiL09VRDhCVGU3TEVyK1RSWEFwN3pIbgo5bTE4dDVzbm1zMHZXUS8zdkIxa0gwaEwxSFFoSWVyVExRWWZtZHQwQndNRUlPc29Qd1ZacjY5cUFXTW9EK05hCjMzWmNmODZITDRZWDlzeUhKYUJYTDlOYWF6VDMwQTNsUXJzZjQxejEwUVF0SFB5anBidmp5cFdybnZla3o2K20KYnRubW50K2FWYko4VXhXZ3hlU3RvMzNOV1VWYnAwMmR5MjFFNWM0Nkl2eXlkR2gxTnJFZlh0VUZtTGg1QUNsZwpnTXFhTDZtMXdTczcxamJwVmc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGRkRDQ0F2eWdBd0lCQWdJVVRUUlYxVnJIazRnK2tBMDMzdGFjTm1QUWlsUXdEUVlKS29aSWh2Y05BUUVMCkJRQXdJakVPTUF3R0ExVUVDZ3dGU1hOMGFXOHhFREFPQmdOVkJBTU1CMUp2YjNRZ1EwRXdIaGNOTWpRd05USXgKTVRVME1qVTFXaGNOTXpRd05URTVNVFUwTWpVMVdqQWlNUTR3REFZRFZRUUtEQVZKYzNScGJ6RVFNQTRHQTFVRQpBd3dIVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUEFEQ0NBZ29DZ2dJQkFLQzBCbm04CnM0U04wcWx1RWJTYVhyNDdibXlPa3A3NWtzYjE1eEJuWDRLMUNvdncvd2Z3dzZGaU13UkNPK0NIQUZKRzNIVG8KNlRsSWNGSVpSVENXYzlxZC9TTERCeml2WGFtN05hRXZxcVRrSi9JQ1U5NGFIQ214djYzSVZnMS9Vd3RGdEE1awpQS0tLRXg2WWdLVmpjYmVuN1VpdndSc3B1NGVkbVJuSDF2RGZUVXJyRHFxM2gxSGhZdGQrMHJBZTBXdmo5SXVHClozS25jMU5oMGFiV3EyWGFGT3NNd2djMEpCUkc3VmoxZG9mckh2K1VEaTEvUjNuemRaV2gveHhQQ3d4blFjR3AKQmExaFJHTU5FNUJZSkZiVXBUM09IUVloVSthRi9tbGNPUXVnMmdDamNTaWRmeVBDM0p6ek5ndld3THBJMzJHTAprbEVKT2orRW5iTFlzWHlXY1pvYks0ZnYxR1lTNVhzRWlPMW01QW9WUGExNmpIdmcvNVNIZjh6YWN5d3lnN2M0CktlZzdQYTUvT0k4ZFFOU2ZoUnpGTCtJcVc2SzhFRmtvSEJhZnNZRk85cXl6UDZrb3F4MHNWZlMzeGpRalNRdnkKRmNZcjRyc2JRMnZ1aTZscUpLQ3BJR01iOTlTUmN3am5EUWlCaU55ZEVILzhrOVdETkx1OFdEVVAxMWNCeVVIOAp3TUJKaFdPZk8zZjhzcjVRWXlOcnpTUVhuZzFOTTA5Wi9CUk1EQzdwdVNnQ1JTZGEra1RwQlpROGprdkc1NzlrCitVNGZVWUkveDROaGRzODRVYVFraVJoUmdBeWYwTGpmdFo1cDdUa2pKUGZGb0szZElQaTVBckxtamNjRUNuSVMKZU95NkpQY1FVdVQxTHVScEZkb1pVcGpWSHFGRFJvekVnNXl4QWdNQkFBR2pRakJBTUIwR0ExVWREZ1FXQkJUKwoxUmtPYU9DWndrWDR5SE9ScnhHeEp0MlMyakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTRHQTFVZER3RUIvd1FFCkF3SUM1REFOQmdrcWhraUc5dzBCQVFzRkFBT0NBZ0VBUEhKZlJDYWtuR2tlR0RrVTFuNURjMU1zNHVnaHBNeG4KakZqbzFqZ2RQVm54YjVoTmVBc3JpWnpyVkZkVk05eXhwTnViTW1MYWNSbHluNTVOMExPTUxOZG9CUmRZTFdKbQpiV3hiQzhTbHNUMUI4MWh1NHhNK1NVOFpUd3JKbEU0T3JaaXBJaE5hWDhHbFNTT3ZOTWR3MWdyTnhFblM5eDB4Ckg3VW9OdGhZZ25jbjJ4VC9VVnFOMlJua0pSMExXVjV6cjBiR3RuelhKcEMraTBjeWREcXY3MDROUTZLQzBxb1AKeDFJRFJyUitqVHVzZlk3NlByMGo1c0FzM0w1ZkN3SGRjZU95Q1gwSndvVGVSdkd0Z0pZbVk0NUdMZlBqQU5yYwpVcXBQM0xEWDdSSkJUSXdXUzFHVzNHRlVPRDNaaWM2VFBMWUNrNEVGMHJQTWFBNHFmVGpPdmtwMXhYbUJHV0hQCm1jbXNScWlVdzllZ0ZtTjh3RTY4L3FYT2lSQ2orTnl6bW1pSjVUL090Rk9EbXk4d2FKMjZKL2cxS1lZdHkramEKNXRwYkdpYkU0azNCSEFmNUVuNVpHQ08rRVRaVnBZd1phNFBvUmpXeWZxbTMyeCtpUVJwcG8yeU9tS24xWFZ1OQpUOWhQYzlOeEJRdWRDU0RVT2xwRlpUb0lzbWVFQno1eGdZek82dUdoY1plT3c2ZDZqUWJzUGtJOURVb1l4cXhDCm9LZ21CRERic1UvSXRhY2hDYWN3WDZHMUJWVnA2dWttVERGUjc5VFNYOXBSUE44VjJ4WWE5TmNnenlCRkpaMmwKaGhiZjBqaHJpa0RiUUN3dzY0OTlLbGJ3eWdJaUtGQjhPdFl4cVRZeTNraCtpN042TzhYdWFyTGJLSnpvRjJjUgpsS0xWZG4wd213UT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  root-cert.pem: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZGRENDQXZ5Z0F3SUJBZ0lVVFRSVjFWckhrNGcra0EwMzN0YWNObVBRaWxRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRU9NQXdHQTFVRUNnd0ZTWE4wYVc4eEVEQU9CZ05WQkFNTUIxSnZiM1FnUTBFd0hoY05NalF3TlRJeApNVFUwTWpVMVdoY05NelF3TlRFNU1UVTBNalUxV2pBaU1RNHdEQVlEVlFRS0RBVkpjM1JwYnpFUU1BNEdBMVVFCkF3d0hVbTl2ZENCRFFUQ0NBaUl3RFFZSktvWklodmNOQVFFQkJRQURnZ0lQQURDQ0Fnb0NnZ0lCQUtDMEJubTgKczRTTjBxbHVFYlNhWHI0N2JteU9rcDc1a3NiMTV4Qm5YNEsxQ292dy93Znd3NkZpTXdSQ08rQ0hBRkpHM0hUbwo2VGxJY0ZJWlJUQ1djOXFkL1NMREJ6aXZYYW03TmFFdnFxVGtKL0lDVTk0YUhDbXh2NjNJVmcxL1V3dEZ0QTVrClBLS0tFeDZZZ0tWamNiZW43VWl2d1JzcHU0ZWRtUm5IMXZEZlRVcnJEcXEzaDFIaFl0ZCswckFlMFd2ajlJdUcKWjNLbmMxTmgwYWJXcTJYYUZPc013Z2MwSkJSRzdWajFkb2ZySHYrVURpMS9SM256ZFpXaC94eFBDd3huUWNHcApCYTFoUkdNTkU1QllKRmJVcFQzT0hRWWhVK2FGL21sY09RdWcyZ0NqY1NpZGZ5UEMzSnp6Tmd2V3dMcEkzMkdMCmtsRUpPaitFbmJMWXNYeVdjWm9iSzRmdjFHWVM1WHNFaU8xbTVBb1ZQYTE2akh2Zy81U0hmOHphY3l3eWc3YzQKS2VnN1BhNS9PSThkUU5TZmhSekZMK0lxVzZLOEVGa29IQmFmc1lGTzlxeXpQNmtvcXgwc1ZmUzN4alFqU1F2eQpGY1lyNHJzYlEydnVpNmxxSktDcElHTWI5OVNSY3dqbkRRaUJpTnlkRUgvOGs5V0ROTHU4V0RVUDExY0J5VUg4CndNQkpoV09mTzNmOHNyNVFZeU5yelNRWG5nMU5NMDlaL0JSTURDN3B1U2dDUlNkYStrVHBCWlE4amt2RzU3OWsKK1U0ZlVZSS94NE5oZHM4NFVhUWtpUmhSZ0F5ZjBMamZ0WjVwN1RrakpQZkZvSzNkSVBpNUFyTG1qY2NFQ25JUwplT3k2SlBjUVV1VDFMdVJwRmRvWlVwalZIcUZEUm96RWc1eXhBZ01CQUFHalFqQkFNQjBHQTFVZERnUVdCQlQrCjFSa09hT0Nad2tYNHlIT1JyeEd4SnQyUzJqQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01BNEdBMVVkRHdFQi93UUUKQXdJQzVEQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFQSEpmUkNha25Ha2VHRGtVMW41RGMxTXM0dWdocE14bgpqRmpvMWpnZFBWbnhiNWhOZUFzcmlaenJWRmRWTTl5eHBOdWJNbUxhY1JseW41NU4wTE9NTE5kb0JSZFlMV0ptCmJXeGJDOFNsc1QxQjgxaHU0eE0rU1U4WlR3ckpsRTRPclppcEloTmFYOEdsU1NPdk5NZHcxZ3JOeEVuUzl4MHgKSDdVb050aFlnbmNuMnhUL1VWcU4yUm5rSlIwTFdWNXpyMGJHdG56WEpwQytpMGN5ZERxdjcwNE5RNktDMHFvUAp4MUlEUnJSK2pUdXNmWTc2UHIwajVzQXMzTDVmQ3dIZGNlT3lDWDBKd29UZVJ2R3RnSlltWTQ1R0xmUGpBTnJjClVxcFAzTERYN1JKQlRJd1dTMUdXM0dGVU9EM1ppYzZUUExZQ2s0RUYwclBNYUE0cWZUak92a3AxeFhtQkdXSFAKbWNtc1JxaVV3OWVnRm1OOHdFNjgvcVhPaVJDaitOeXptbWlKNVQvT3RGT0RteTh3YUoyNkovZzFLWVl0eStqYQo1dHBiR2liRTRrM0JIQWY1RW41WkdDTytFVFpWcFl3WmE0UG9Sald5ZnFtMzJ4K2lRUnBwbzJ5T21LbjFYVnU5ClQ5aFBjOU54QlF1ZENTRFVPbHBGWlRvSXNtZUVCejV4Z1l6TzZ1R2hjWmVPdzZkNmpRYnNQa0k5RFVvWXhxeEMKb0tnbUJERGJzVS9JdGFjaENhY3dYNkcxQlZWcDZ1a21UREZSNzlUU1g5cFJQTjhWMnhZYTlOY2d6eUJGSloybApoaGJmMGpocmlrRGJRQ3d3NjQ5OUtsYnd5Z0lpS0ZCOE90WXhxVFl5M2toK2k3TjZPOFh1YXJMYktKem9GMmNSCmxLTFZkbjB3bXdRPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
kind: Secret
metadata:
  name: cacerts
  namespace: {{.Release.Namespace}}
